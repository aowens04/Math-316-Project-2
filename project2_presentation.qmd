---
title: "Bank Marketing Data"
author: "Amaya Owens, Paige Hill, Lauren McIntosh"
format: 
 revealjs:
  theme: sky
  transition: slide
  hash: true
embed-resources: true
---
## Background Information
* Data was collected from a Portuguese bank to analyze the effectiveness of their marketing campaign
* Collected from 2008 to 2013, so it is affected by the financial crisis
* Selling long-term deposits
* Previous research only yielded good results when using call duration
* Allows them to focus resources on customers most likely to subscribe


## Dataset Description
* The researchers began with 150 features and selected 17 of the most relevant features
* 17 columns and 45,211 rows
* Features: demographics, financial info, campaign details
* Some "unknown" values in contact method and previous outcomes

## Basic Information
```{python}
import pandas as pd
import altair as alt
from great_tables import GT, style, loc

df = pd.read_csv("./bank-full.csv", sep=';')
df_sample = df.sample(5000, random_state=516)

```


::::{.columns}
:::{.column width=20%}

| **Var** | **Data type** | 
|---------|---------------|
| Age | int |
| Job|  obj | 
| Martial |  obj |
| Education |  obj |
| Default |  obj |
| Balance|  int | 
:::
:::{.column width=20%}

:::
 
:::{.column width=20%}
|**Var** | **Data Type**|
|--------|---------------|
|Housing | obj |
| Loan | obj 
| Contact |  obj |
| Day | int | 
| Month |  obj |
| Duration | int |
:::
:::{.column width=20%}
:::

:::{.column width=20%}
|**Var** | **Data Type**|
|--------|---------------|
| Campaign |  int |
| PDays |  int |
| Previous |  int |
| POutcome |  obj |
| y | obj |
:::
::::


## Statistical Measures 
| Variable | Age (years) | Balance (â‚¬) | Campaign (contacts) | Duration (sec) |
|----------|-------------|-------------|---------------------|----------------|
| **Minimum** | 18 | -8,019 | 1 | 0 |
| **Median** | 39 | 448 | 2 | 180 |
| **Maximum** | 95 | 102,127 | 63 | 4,918 |
| **Mean** | 40.9 | 1,362 | 2.8 | 258 |
| **Std Dev** | 10.6 | 3,044 | 3.1 | 258 |

## Demographics & Features {.smaller}
:::: {.columns}
::: {.column width="50%"}

| Category | Most Common | Count | % Total |
|----------|-------------|-------|---------|
| **Job** | Blue-collar | 9,732 | 21.5% |
| **Education** | Secondary | 22,472 | 49.7% |
| **Marital** | Married | 27,214 | 60.2% |
| **Housing Loan** | Yes | 25,130 | 55.6% |
| **Personal Loan** | No | 37,967 | 84.0% |
| **Contact Month** | May | 15,629 | 34.6% |

:::
:::{.column width="10%"}
:::

::: {.column width="40%" .smaller}
**Key Statistics:**

* **Age:** 18-95 years (mean: 40.9)
* **Balance:** 7.9% have a negative balance
* **Campaign:** Most contacted 1-2 times
* **Duration:** 14.8% had 0-second calls
* **Previous contact:** 81.7% never contacted before
* **Target variable:** 11.7% subscribed 

:::
::::

## Subscriptions

```{python}

y_dist = df['y'].value_counts(normalize=True).reset_index()
y_dist.columns = ['Subscription', 'Proportion']

alt.Chart(y_dist).mark_bar().encode(
x=alt.X('Subscription', sort='-y'),
y=alt.Y('Proportion', title='Proportion of Clients'),
color='Subscription'
).properties(
	title='Overall Distribution of Term Deposit Subscription',
	width=600,
	height=400
).configure_axis(
    labelFontSize=14,  # Adjust font size of axis labels
    titleFontSize=16   # Adjust font size of axis titles
).configure_title(
	fontSize=20
)
```

## Education Level

```{python}
edu_chart = (
alt.Chart(df_sample)
.mark_bar()
.encode(
x=alt.X('education:N', title='Education Level', sort='-y'),
y=alt.Y('count():Q', title='Number of Clients'),
color=alt.Color('y:N', title='Subscribed?'),
column=alt.Column('y:N', title='Subscription Outcome')
)
.properties(
	title='Education Level by Subscription Status',
	width=400,
	height=400
).configure_axis(
    labelFontSize=14,  # Adjust font size of axis labels
    titleFontSize=16   # Adjust font size of axis titles
).configure_title(
	fontSize=20
).configure_text(
	fontSize=14
)
)
edu_chart

```

## Age

```{python}
age_chart = (
alt.Chart(df_sample)
.mark_area(opacity=0.6)
.encode(
x=alt.X('age', bin=alt.Bin(maxbins=30), title='Age'),
y=alt.Y('count()', title='Number of Clients'),
#color=alt.Color('y', title='Subscribed?')
color='y:N'
)
.properties(
	title='Age Distribution by Subscription Status',
	width=600,
	height=400
	)
).configure_axis(
	labelFontSize=14,  # Adjust font size of axis labels
	titleFontSize=16   # Adjust font size of axis titles
).configure_title(
	fontSize=20
)

age_chart
```

## Frequency of Contact

```{python}
contact_chart = (
alt.Chart(df_sample)
.mark_boxplot()
.encode(
x=alt.X('y:N', title='Subscribed?'),
y=alt.Y('campaign:Q', title='Number of Contacts in Current Campaign'),
color='y:N'
)
.properties(
	title='Campaign Contact Frequency by Subscription',
	width=300,
	height=400
).configure_axis(
    labelFontSize=14,  # Adjust font size of axis labels
    titleFontSize=16   # Adjust font size of axis titles
).configure_title(
	fontSize=20
)
)
contact_chart

```

## Outcome of Previous Campaigns

```{python}

prev_chart = (
alt.Chart(df_sample)
.mark_bar()
.encode(
x=alt.X('poutcome:N', title='Previous Campaign Outcome'),
y=alt.Y('count():Q', title='Number of Clients'),
color='y:N'
)
.properties(
	title='Previous Campaign Outcome by Subscription Status',
	width=300,
	height=400
).configure_axis(
    labelFontSize=14,  # Adjust font size of axis labels
    titleFontSize=16   # Adjust font size of axis titles
).configure_title(
	fontSize=20
)

)
prev_chart

```

## Questions
* What are the key demographic and financial profiles of clients who subscribe to a term deposit compared to those who do not?
* How does the strategy of the marketing campaign itself (specifically the timing and frequency of contact) correlate with the success rate of subscriptions?
* To what extent does a client's past interaction with the bank, including previous campaign outcomes, predict their likelihood of subscribing for the current campaign?